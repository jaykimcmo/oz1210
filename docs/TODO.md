- [x] `.cursor/` 디렉토리
  - [x] `rules/` 커서룰 (common, supabase, web 규칙 포함)
  - [ ] `mcp.json` MCP 서버 설정
  - [ ] `dir.md` 프로젝트 디렉토리 구조
- [ ] `.github/` 디렉토리
- [ ] `.husky/` 디렉토리
- [x] `app/` 디렉토리
  - [x] `favicon.ico` 파일
  - [ ] `not-found.tsx` 파일
  - [ ] `robots.ts` 파일
  - [ ] `sitemap.ts` 파일
  - [ ] `manifest.ts` 파일
- [x] `supabase/` 디렉토리
  - [x] `config.toml` 파일
  - [x] `migrations/db.sql` 파일
- [x] `public/` 디렉토리
  - [x] `icons/` 디렉토리 (192x192, 256x256, 384x384, 512x512)
  - [x] `logo.png` 파일
  - [x] `og-image.png` 파일
- [x] `tsconfig.json` 파일
- [ ] `.cursorignore` 파일
- [x] `.gitignore` 파일
- [ ] `.prettierignore` 파일
- [ ] `.prettierrc` 파일
- [x] `eslint.config.mjs` 파일
- [x] `AGENTS.md` 파일 (CLAUDE.md로 존재)

# My Trip - 개발 TODO 리스트

> PRD, Flowchart, Design 문서 기반 작업 항목 정리

## Phase 1: 기본 구조 & 공통 설정

- [x] 프로젝트 셋업
  - [x] 환경변수 설정 (`.env`)
    - [x] `NEXT_PUBLIC_TOUR_API_KEY` (한국관광공사 API)
    - [x] `TOUR_API_KEY` (서버 사이드용)
    - [x] `NEXT_PUBLIC_NAVER_MAP_CLIENT_ID` (네이버 지도)
    - [x] Clerk 인증 키 확인
    - [x] Supabase 키 확인
  - [x] `.env.example` 파일 생성
- [x] API 클라이언트 구현
  - [x] `lib/api/tour-api.ts` 생성
    - [x] `getAreaCode()` - 지역코드 조회 (`areaCode2`)
    - [x] `getAreaBasedList()` - 지역 기반 목록 (`areaBasedList2`)
    - [x] `searchKeyword()` - 키워드 검색 (`searchKeyword2`)
    - [x] `getDetailCommon()` - 공통 정보 (`detailCommon2`)
    - [x] `getDetailIntro()` - 소개 정보 (`detailIntro2`)
    - [x] `getDetailImage()` - 이미지 목록 (`detailImage2`)
    - [x] `getDetailPetTour()` - 반려동물 정보 (`detailPetTour2`)
    - [x] 공통 파라미터 처리 (serviceKey, MobileOS, MobileApp, _type)
    - [x] 에러 처리 및 재시도 로직
- [x] 타입 정의
  - [x] `lib/types/tour.ts` 생성
    - [x] `TourItem` 인터페이스 (목록)
    - [x] `TourDetail` 인터페이스 (상세)
    - [x] `TourIntro` 인터페이스 (운영정보)
    - [x] `TourImage` 인터페이스 (이미지)
    - [x] `PetTourInfo` 인터페이스 (반려동물)
  - [x] `lib/types/stats.ts` 생성
    - [x] `RegionStats` 인터페이스
    - [x] `TypeStats` 인터페이스
    - [x] `StatsSummary` 인터페이스
- [x] 레이아웃 구조
  - [x] `app/layout.tsx` 업데이트
    - [x] 메타데이터 설정
    - [x] 헤더/푸터 구조 확인
  - [x] `components/Navbar.tsx` 업데이트
    - [x] 로고, 검색창, 로그인 버튼
    - [x] 네비게이션 링크 (홈, 통계, 북마크)
- [x] 공통 컴포넌트
  - [x] `components/ui/loading.tsx` - 로딩 스피너
  - [x] `components/ui/skeleton.tsx` - 스켈레톤 UI
  - [x] `components/ui/error.tsx` - 에러 메시지
  - [x] `components/ui/toast.tsx` - 토스트 알림 (shadcn/ui)

## Phase 2: 홈페이지 (`/`) - 관광지 목록

- [x] 페이지 기본 구조
  - [x] `app/page.tsx` 생성
    - [x] 기본 레이아웃 (헤더, 메인, 푸터)
    - [x] 반응형 컨테이너 설정
- [x] 관광지 목록 기능 (MVP 2.1)
  - [x] `components/tour-card.tsx` 생성
    - [x] 썸네일 이미지 (기본 이미지 fallback)
    - [x] 관광지명
    - [x] 주소 표시
    - [x] 관광 타입 뱃지
    - [x] 간단한 개요 (1-2줄)
    - [x] 호버 효과 (scale, shadow)
    - [x] 클릭 시 상세페이지 이동
  - [x] `components/tour-list.tsx` 생성
    - [x] 그리드 레이아웃 (반응형)
    - [x] 카드 목록 표시
    - [x] 로딩 상태 (Skeleton UI)
    - [x] 빈 상태 처리
  - [x] API 연동
    - [x] `getAreaBasedList()` 호출
    - [x] 데이터 파싱 및 표시
    - [x] 에러 처리
- [x] 필터 기능
  - [x] `components/tour-filters.tsx` 생성
    - [x] 지역 필터 (시/도 선택)
      - [x] `getAreaCode()` API로 지역 목록 로드
      - [x] 드롭다운 또는 버튼 그룹
      - [x] "전체" 옵션
    - [x] 관광 타입 필터
      - [x] 관광지(12), 문화시설(14), 축제/행사(15), 여행코스(25), 레포츠(28), 숙박(32), 쇼핑(38), 음식점(39)
      - [x] 다중 선택 가능
      - [x] "전체" 옵션
    - [ ] 반려동물 동반 가능 필터 (MVP 2.5)
      - [ ] 토글 버튼
      - [ ] 크기별 필터 (소형, 중형, 대형)
    - [x] 정렬 옵션
      - [x] 최신순 (modifiedtime)
      - [x] 이름순 (가나다)
    - [x] 필터 상태 관리 (URL 쿼리 파라미터 또는 상태)
  - [x] 필터 적용 로직
    - [x] 필터 변경 시 API 재호출
    - [x] 필터 조합 처리
- [x] 검색 기능 (MVP 2.3)
  - [x] `components/tour-search.tsx` 생성
    - [x] 검색창 UI (헤더 또는 메인 영역)
    - [x] 검색 아이콘
    - [x] 엔터 또는 버튼 클릭으로 검색
    - [x] 검색 중 로딩 스피너
  - [x] 검색 API 연동
    - [x] `searchKeyword()` 호출
    - [x] 검색 결과 표시
    - [x] 검색 결과 개수 표시
    - [x] 결과 없음 메시지
  - [x] 검색 + 필터 조합
    - [x] 키워드 + 지역 필터
    - [x] 키워드 + 타입 필터
    - [x] 모든 필터 동시 적용
- [x] 네이버 지도 연동 (MVP 2.2)
  - [x] `components/naver-map.tsx` 생성
    - [x] Naver Maps API v3 초기화
    - [x] 지도 컨테이너 설정
    - [x] 초기 중심 좌표 설정
    - [x] 줌 레벨 설정
  - [x] 마커 표시
    - [x] 관광지 목록을 마커로 표시
    - [x] 좌표 변환 (KATEC → WGS84: mapx/mapy / 10000000)
    - [x] 마커 클릭 시 인포윈도우
      - [x] 관광지명
      - [x] 간단한 설명
      - [x] "상세보기" 버튼
    - [x] 관광 타입별 마커 색상 구분 (선택 사항) - 기본 마커 사용
  - [x] 지도-리스트 연동
    - [x] 리스트 항목 클릭 → 지도 이동 및 마커 강조
    - [x] 리스트 항목 호버 → 마커 강조 (선택 사항) - 구현하지 않음
    - [x] 마커 클릭 → 리스트 항목 강조
  - [x] 지도 컨트롤
    - [x] 줌 인/아웃 버튼
    - [x] 지도 유형 선택 (일반/스카이뷰)
    - [x] 현재 위치 버튼 (선택 사항) - 구현하지 않음
  - [x] 반응형 레이아웃
    - [x] 데스크톱: 리스트(좌측 50%) + 지도(우측 50%) 분할
    - [x] 모바일: 탭 형태로 리스트/지도 전환
- [x] 페이지네이션
  - [x] 무한 스크롤 구현
    - [x] Intersection Observer 사용
    - [x] 하단 로딩 인디케이터
    - [x] 페이지당 10-20개 항목
  - [x] 또는 페이지 번호 선택 방식 (무한 스크롤로 구현 완료)
- [x] 최종 통합 및 스타일링
  - [x] 모든 기능 통합 테스트
  - [x] 반응형 디자인 확인 (모바일/태블릿/데스크톱)
  - [x] 로딩 상태 개선
  - [x] 에러 처리 개선

**구현 중 발생한 오류 및 처리:**
1. **`bounds.isEmpty is not a function` 에러**
   - 원인: Naver Maps API v3에서 `isEmpty()` 메서드가 지원되지 않음
   - 처리: `hasValidBounds` 플래그를 사용하여 유효한 좌표가 있는지 확인하도록 변경

2. **`mapInstanceRef.current.refreshSize is not a function` 에러**
   - 원인: Naver Maps API v3에서 `refreshSize()` 메서드가 지원되지 않음
   - 처리: `setSize()` 메서드를 사용하여 지도 크기 조정하도록 변경, ResizeObserver로 컨테이너 크기 변경 감지

3. **좌표 변환 문제 (좌표가 대한민국 범위를 벗어남)**
   - 원인: API 응답의 좌표 형식이 다양하고, 변환 공식이 모든 경우에 적용되지 않음
   - 처리: 자동 형식 감지 로직 구현, 다중 변환 공식 지원, 좌표 범위 검증 강화

## Phase 3: 상세페이지 (`/places/[contentId]`)

- [x] 페이지 기본 구조
  - [x] `app/places/[contentId]/page.tsx` 생성
    - [x] 동적 라우팅 설정 (Next.js 15 params Promise 처리)
    - [x] 뒤로가기 버튼 (페이지 상단에 배치)
    - [x] 기본 레이아웃 구조 (단일 컬럼, 모바일 우선)
    - [x] 라우팅 테스트
  - [x] `app/places/[contentId]/loading.tsx` 생성 (Skeleton UI)
  - [x] `app/places/[contentId]/error.tsx` 생성 (에러 UI)
  - [x] 에러 처리 구현
    - [x] 404 처리 (`notFound()` 함수 사용)
    - [x] API 에러 처리 (TourApiError, NetworkError 등)
    - [x] 사용자 친화적 에러 메시지 표시

**구현 중 발생한 오류 및 처리:**
1. **`NetworkError` 발생 시 재시도 기능 부재**
   - 원인: Server Component에서 에러 발생 시 사용자가 재시도할 수 있는 방법이 없었음
   - 처리: `components/tour-detail/detail-error.tsx` 클라이언트 컴포넌트 생성, `router.refresh()`를 사용한 재시도 기능 제공, "다시 시도" 및 "홈으로 돌아가기" 버튼 추가

2. **`TourApiError`의 `resultCode` 속성 오류**
   - 원인: `err.code === 'NOT_FOUND'`로 체크했지만, `TourApiError` 클래스는 `resultCode` 속성을 사용함
   - 처리: `err.resultCode === 'NOT_FOUND'`로 수정하여 404 에러를 올바르게 처리하도록 변경

- [x] 기본 정보 섹션 (MVP 2.4.1)
  - [x] `components/tour-detail/detail-info.tsx` 생성
    - [x] `getDetailCommon()` API 연동 (page.tsx에서 호출, props로 전달)
    - [x] 관광지명 (대제목)
    - [x] 대표 이미지 (크게 표시)
    - [x] 주소 표시 및 복사 기능
      - [x] 클립보드 API 사용 (`components/tour-detail/copy-address-button.tsx`)
      - [x] 복사 완료 토스트 (sonner 사용)
    - [x] 전화번호 (클릭 시 전화 연결)
    - [x] 홈페이지 (링크)
    - [x] 개요 (긴 설명문)
    - [x] 관광 타입 및 카테고리 뱃지
    - [x] 정보 없는 항목 숨김 처리
  - 추가 개발 사항
    - [x] `components/tour-detail/copy-address-button.tsx` 생성 (주소 복사 클라이언트 컴포넌트)
    - [x] 홈페이지 URL 검증 및 정규화 로직 (http:// 또는 https:// 자동 추가)
    - [x] 우편번호 표시 기능
    - [x] 반응형 그리드 레이아웃 (모바일: 1열, 데스크톱: 2열)
    - [x] 아이콘 기반 정보 표시 (MapPin, Phone, Globe, ExternalLink)
    - [x] 개요 섹션 구분선 및 제목 추가
- [x] 운영 정보 섹션 (MVP 2.4.2)
  - [x] `components/tour-detail/detail-intro.tsx` 생성
    - [x] `getDetailIntro()` API 연동 (page.tsx에서 호출, props로 전달)
    - [x] 운영시간/개장시간
    - [x] 휴무일
    - [x] 이용요금
    - [x] 주차 가능 여부
    - [x] 수용인원
    - [x] 체험 프로그램
    - [x] 유모차/반려동물 동반 가능 여부
    - [x] 문의처
    - [x] 정보 없는 항목 숨김 처리
  - 추가 개발 사항
    - [x] 타입별 특수 정보 표시 (문화시설, 축제, 레포츠, 숙박, 음식점)
    - [x] 그리드 레이아웃 (모바일: 1열, 데스크톱: 2열)
    - [x] 아이콘 기반 정보 표시 (Clock, CalendarX, CreditCard, Car, Users, Activity, Baby, PawPrint, Phone)
    - [x] 섹션 제목 및 구분선 (공통 정보와 타입별 정보 분리)
    - [x] 에러 처리 (운영 정보는 선택 사항이므로 에러 시 null 반환, 페이지는 계속 표시)
- [x] 이미지 갤러리 (MVP 2.4.3)
  - [x] `components/tour-detail/detail-gallery.tsx` 생성
    - [x] `getDetailImage()` API 연동 (page.tsx에서 호출, props로 전달)
    - [x] 대표 이미지 + 서브 이미지들
    - [x] 이미지 슬라이드 기능 (embla-carousel-react 사용)
    - [x] 이미지 클릭 시 전체화면 모달
    - [x] 이미지 없으면 섹션 숨김 처리
    - [x] Next.js Image 컴포넌트 사용 (최적화)
  - 추가 개발 사항
    - [x] embla-carousel-react 라이브러리 설치 및 통합
    - [x] 좌우 네비게이션 버튼 (ChevronLeft, ChevronRight)
    - [x] 키보드 네비게이션 (ArrowLeft, ArrowRight, Escape)
    - [x] 썸네일 네비게이션 (하단 썸네일 표시, 클릭 시 이동, 현재 이미지 하이라이트)
    - [x] 이미지 인덱스 표시 (예: 1/10)
    - [x] 단일 이미지와 여러 이미지 구분 처리
    - [x] 이미지 로드 실패 시 에러 처리 (onError)
    - [x] 모달과 캐러셀 인덱스 동기화
    - [x] 반응형 레이아웃 및 다크 모드 지원
- [x] 지도 섹션 (MVP 2.4.4)
  - [x] `components/tour-detail/detail-map.tsx` 생성
    - [x] 해당 관광지 위치 표시
    - [x] 마커 1개 표시
    - [x] "길찾기" 버튼
      - [x] 네이버 지도 앱/웹 연동
      - [x] URL: `https://map.naver.com/v5/directions/{좌표}`
    - [x] 좌표 정보 표시 (선택 사항)
  - 추가 개발 사항
    - [x] Naver Maps API v3 (NCP) 스크립트 로드 및 초기화
    - [x] 좌표 변환 (`convertKATECToWGS84` 함수 사용)
    - [x] 좌표 복사 기능 (클립보드 API, toast 알림)
    - [x] 지도 크기 조정 (ResizeObserver 사용)
    - [x] 에러 처리 (좌표 없음, 좌표 변환 실패, API 키 없음, 지도 로드 실패)
    - [x] 반응형 지도 높이 (모바일: 400px, 태블릿: 450px, 데스크톱: 500px)
    - [x] 로딩 상태 표시
    - [x] 접근성 (ARIA 라벨, 키보드 네비게이션)
- [x] 공유 기능 (MVP 2.4.5)
  - [x] `components/tour-detail/share-button.tsx` 생성
    - [x] URL 복사 기능
      - [x] `navigator.clipboard.writeText()` 사용
      - [x] HTTPS 환경 확인
    - [x] 복사 완료 토스트 메시지
    - [x] 공유 아이콘 버튼 (Share2 아이콘)
  - [x] Open Graph 메타태그
    - [x] `app/places/[contentId]/page.tsx`에 `generateMetadata` 함수 추가
    - [x] `og:title` - 관광지명
    - [x] `og:description` - 관광지 설명 (100자 이내)
    - [x] `og:image` - 대표 이미지 (fallback 포함)
    - [x] `og:url` - 상세페이지 URL
    - [x] `og:type` - "website"
    - [x] `twitter:card` - "summary_large_image"
  - 추가 개발 사항
    - [x] `generateMetadata` 함수로 동적 메타데이터 생성 (Next.js 15 Metadata API)
    - [x] 에러 처리 (API 실패 시 기본 메타데이터 사용)
    - [x] 이미지 URL 검증 및 fallback 처리 (firstimage → firstimage2 → 기본 이미지)
    - [x] 설명 텍스트 길이 제한 (100자)
    - [x] 절대 URL 생성 (NEXT_PUBLIC_APP_URL 환경변수 사용)
    - [x] 상세페이지 상단에 공유 버튼 배치 (뒤로가기 버튼 옆)
    - [x] 접근성 (ARIA 라벨, 키보드 네비게이션)
- [x] 북마크 기능 (MVP 2.4.5)
  - [x] `components/bookmarks/bookmark-button.tsx` 생성
    - [x] 별 아이콘 (채워짐/비어있음) - Star / StarOff (lucide-react)
    - [x] 북마크 상태 확인 (Supabase 조회)
    - [x] 북마크 추가/제거 기능
    - [x] 인증된 사용자 확인 (Clerk)
    - [x] 로그인하지 않은 경우: 로그인 유도 (SignInButton 모달)
  - [x] Supabase 연동
    - [x] `actions/bookmark-actions.ts` 생성 (Server Actions)
      - [x] `getBookmark()` - 북마크 조회
      - [x] `addBookmark()` - 북마크 추가
      - [x] `removeBookmark()` - 북마크 제거
      - [x] `getUserBookmarks()` - 사용자 북마크 목록
    - [x] `bookmarks` 테이블 사용 (db.sql 참고)
      - [x] `user_id` (users 테이블 참조)
      - [x] `content_id` (한국관광공사 API contentid)
      - [x] UNIQUE 제약 (user_id, content_id)
  - [x] 상세페이지에 북마크 버튼 추가
  - 추가 개발 사항
    - [x] Server Actions 사용 (API Routes 대신)
    - [x] Clerk userId → Supabase users.id 매핑 로직 (clerk_id 기반)
    - [x] 사용자 자동 동기화 (없으면 자동 생성)
    - [x] UNIQUE 제약 에러 처리 (중복 북마크 방지)
    - [x] 로딩 상태 및 에러 처리
    - [x] 토스트 알림 (sonner)
    - [x] 낙관적 업데이트 (Optimistic Update)
    - [x] 접근성 (ARIA 라벨, 키보드 네비게이션)
- [x] 반려동물 정보 섹션 (MVP 2.5)
  - [x] `components/tour-detail/detail-pet-tour.tsx` 생성
    - [x] `getDetailPetTour()` API 연동
    - [x] 반려동물 동반 가능 여부 표시
    - [x] 반려동물 크기 제한 정보
    - [x] 반려동물 입장 가능 장소 (실내/실외)
    - [x] 반려동물 동반 추가 요금
    - [x] 반려동물 전용 시설 정보
    - [x] 아이콘 및 뱃지 디자인 (PawPrint 아이콘)
    - [x] 주의사항 강조 표시
  - 추가 개발 사항
    - [x] Server Component로 구현 (데이터는 page.tsx에서 전달)
    - [x] 크기 정보 파싱 및 뱃지 표시 (소형견/중형견/대형견 가능)
    - [x] 장소 정보 파싱 및 뱃지 표시 (실내/실외/모두 가능)
    - [x] 동반 가능 여부 파싱 및 표시 (가능/불가/제한적)
    - [x] 주의사항 강조 박스 (amber 색상, AlertCircle 아이콘)
    - [x] 반응형 레이아웃 (모바일: 1열, 데스크톱: 2열)
    - [x] 정보 없는 항목 숨김 처리
    - [x] 에러 처리 (반려동물 정보는 선택 사항이므로 에러 시 null 반환, 페이지는 계속 표시)
    - [x] 접근성 (ARIA 라벨, 키보드 네비게이션)
    - [x] 다크 모드 지원
- [x] 추천 관광지 섹션 (선택 사항)
  - [x] 같은 지역 또는 타입의 다른 관광지 추천
  - [x] 카드 형태로 표시
  - 추가 개발 사항
    - [x] `components/tour-detail/detail-recommendations.tsx` 생성 (Client Component, TourCard 재사용)
    - [x] 같은 지역(`areacode`) 또는 같은 타입(`contenttypeid`) 관광지 조회 (병렬 처리)
    - [x] 결과 병합 및 중복 제거 (contentid 기준)
    - [x] 현재 관광지 제외 및 최대 10개 선택
    - [x] 반응형 그리드 레이아웃 (모바일: 1열, 태블릿: 2열, 데스크톱: 3-4열)
    - [x] 빈 상태 처리 (추천 관광지 없을 때 섹션 숨김)
    - [x] 에러 처리 (선택 사항이므로 에러 시 null 반환, 페이지는 계속 표시)
    - [x] 접근성 (ARIA 라벨, role="list", role="listitem")
    - [x] 다크 모드 지원
    - [x] Server/Client Component 에러 처리 (`TourCard`와 `DetailRecommendations`에 `'use client'` 추가)
- [x] 최종 통합 및 스타일링
  - [x] 모든 섹션 통합
  - [x] 반응형 디자인 확인
  - [x] 모바일 최적화
  - [x] 접근성 확인 (ARIA 라벨, 키보드 네비게이션)
  - 추가 개발 사항
    - [x] 섹션 간 간격 및 구분선 통일 (`space-y-6`, `pt-6 border-t`)
    - [x] 헤더 영역 모바일 최적화 (터치 영역 최소 44x44px, 반응형 간격)
    - [x] 반응형 브레이크포인트 일관성 검증 (모바일/태블릿/데스크톱)
    - [x] 모바일 터치 영역 최적화 (모든 버튼 최소 44x44px)
    - [x] 접근성 속성 검증 및 개선 (ARIA 라벨, 키보드 네비게이션)
    - [x] 다크 모드 색상 일관성 확인 (Tailwind 다크 모드 클래스 사용)
    - [x] 성능 최적화 확인 (이미지 lazy loading, priority 속성 적절한 사용)

## Phase 4: 통계 대시보드 페이지 (`/stats`)

- [x] 페이지 기본 구조
  - [x] `app/stats/page.tsx` 생성
    - [x] 기본 레이아웃 구조
    - [x] 반응형 레이아웃 설정 (모바일 우선)
    - [x] Server Component로 구현
  - 추가 개발 사항
    - [x] `app/stats/loading.tsx` 생성 (Skeleton UI)
    - [x] `app/stats/error.tsx` 생성 (에러 UI)
    - [x] 메타데이터 설정 (SEO 최적화, Open Graph, Twitter Card)
    - [x] 페이지 제목 섹션 구현 (아이콘, 제목, 설명)
    - [x] 접근성 속성 추가 (ARIA 라벨, 시맨틱 HTML)
    - [x] 다크 모드 지원
    - [x] 네비게이션 연동 확인 (Navbar에 통계 링크 이미 존재)
- [x] 통계 데이터 수집
  - [x] `lib/api/stats-api.ts` 생성
    - [x] `getRegionStats()` - 지역별 관광지 개수 집계
      - [x] `areaBasedList2` API로 각 지역별 totalCount 조회
      - [x] 지역 코드별로 API 호출
    - [x] `getTypeStats()` - 타입별 관광지 개수 집계
      - [x] `areaBasedList2` API로 각 타입별 totalCount 조회
      - [x] contentTypeId별로 API 호출
    - [x] `getStatsSummary()` - 전체 통계 요약
      - [x] 전체 관광지 수
      - [x] Top 3 지역
      - [x] Top 3 타입
      - [x] 마지막 업데이트 시간
    - [x] 병렬 API 호출로 성능 최적화
    - [x] 에러 처리 및 재시도 로직
    - [x] 데이터 캐싱 (revalidate: 3600)
  - 추가 개발 사항
    - [x] `getAllStats()` 함수 추가 (모든 통계 데이터 한 번에 가져오기)
    - [x] `Promise.allSettled`로 개별 실패 허용 (부분 실패 시에도 데이터 반환)
    - [x] `numOfRows: 1`로 최소 데이터만 요청 (totalCount만 필요)
    - [x] 비율 계산 로직 (백분율, 소수점 첫째 자리까지)
    - [x] Top 3 계산 로직 (개수 기준 내림차순 정렬)
    - [x] 에러 로깅 (개발/프로덕션 환경 구분)
    - [x] 타입 안전성 보장 (TypeScript 타입 검증)
- [x] 통계 요약 카드
  - [x] `components/stats/stats-summary.tsx` 생성
    - [x] 전체 관광지 수 표시
    - [x] Top 3 지역 표시 (카드 형태)
    - [x] Top 3 타입 표시 (카드 형태)
    - [x] 마지막 업데이트 시간 표시
    - [x] 로딩 상태 (Skeleton UI)
    - [x] 카드 레이아웃 디자인
  - 추가 개발 사항
    - [x] shadcn/ui Card 컴포넌트 설치
    - [x] 전체 관광지 수 카드 (숫자 포맷팅 toLocaleString, MapPin 아이콘, 배경 장식)
    - [x] Top 3 지역 카드 (순위 표시 메달 색상, 지역명, 개수)
    - [x] Top 3 타입 카드 (순위 표시 메달 색상, 타입명, 개수)
    - [x] 마지막 업데이트 시간 표시 (한국어 날짜 포맷, time 태그 사용)
    - [x] 반응형 그리드 레이아웃 (1열/2열/3열)
    - [x] StatsSummarySkeleton 로딩 상태 컴포넌트
    - [x] 접근성 속성 (ARIA 라벨, 시맨틱 HTML, role="list")
    - [x] 다크 모드 지원 (순위 뱃지 색상)
    - [x] 페이지 통합 및 데이터 연동 (getStatsSummary)
    - [x] 동적 렌더링 설정 (빌드 시 API 호출 방지)
- [x] 지역별 분포 차트 (Bar Chart)
  - [x] `components/stats/region-chart.tsx` 생성
    - [x] shadcn/ui Chart 컴포넌트 설치 (recharts 포함)
    - [x] recharts 기반 Bar Chart 구현
    - [x] Y축: 지역명 (서울, 부산, 제주 등) - 수평 막대 차트
    - [x] X축: 관광지 개수
    - [x] 전체 17개 지역 표시 (개수 기준 내림차순)
    - [x] 바 클릭 시 해당 지역 목록 페이지로 이동 (`/?areaCode=`)
    - [x] 호버 시 정확한 개수 표시 (ChartTooltip)
    - [x] 다크/라이트 모드 지원 (CSS 변수 사용)
    - [x] 반응형 디자인 (모바일/태블릿/데스크톱 높이 조정)
    - [x] 로딩 상태 (RegionChartSkeleton)
    - [x] 접근성 (accessibilityLayer, ARIA 라벨)
  - 추가 개발 사항
    - [x] shadcn/ui Chart 컴포넌트 설치 (`components/ui/chart.tsx`)
    - [x] 수평 막대 차트 구현 (layout="vertical")
    - [x] 숫자 포맷팅 (천 단위 구분자 toLocaleString)
    - [x] 커서 포인터 및 호버 효과
    - [x] 빈 데이터 처리 (데이터 없을 때 메시지 표시)
    - [x] 병렬 데이터 fetch (Promise.all)
    - [x] loading.tsx에 RegionChartSkeleton 통합
- [x] 타입별 분포 차트 (Donut Chart)
  - [x] `components/stats/type-chart.tsx` 생성
    - [x] recharts 기반 Donut Chart 구현 (Pie with innerRadius)
    - [x] 중앙에 전체 개수 표시 (Label 컴포넌트)
    - [x] 타입별 비율 (백분율) 표시
    - [x] 타입별 개수 표시
    - [x] 섹션 클릭 시 해당 타입 목록 페이지로 이동 (`/?contentTypeId=`)
    - [x] 호버 시 타입명, 개수, 비율 표시 (ChartTooltip)
    - [x] 다크/라이트 모드 지원 (CSS 변수 사용)
    - [x] 반응형 디자인 (모바일/태블릿/데스크톱)
    - [x] 로딩 상태 (TypeChartSkeleton)
    - [x] 접근성 (accessibilityLayer, ARIA 라벨)
    - [x] 범례 표시 (ChartLegend)
  - 추가 개발 사항
    - [x] 8개 타입별 고유 색상 설정 (초록/파랑/빨강/노랑/보라/하늘/주황/분홍)
    - [x] 숫자 포맷팅 (천 단위 구분자 toLocaleString)
    - [x] 비율 포맷팅 (소수점 첫째 자리)
    - [x] 커서 포인터 및 호버 효과
    - [x] 빈 데이터 처리 (데이터 없을 때 메시지 표시)
    - [x] 병렬 데이터 fetch (Promise.all)
    - [x] loading.tsx에 TypeChartSkeleton 통합
    - [x] 차트 + 상세 정보 목록 레이아웃 (데스크톱: 가로, 모바일: 세로)
    - [x] 상세 정보 목록 (색상 인디케이터, 타입명, 개수, 비율 바)
    - [x] 목록 항목 클릭 시 해당 타입 목록 페이지로 이동
    - [x] 키보드 네비게이션 지원 (Enter/Space)
- [x] 페이지 통합
  - [x] `app/stats/page.tsx`에 모든 컴포넌트 통합
    - [x] 통계 요약 카드 (상단)
    - [x] 지역별 분포 차트 (중단)
    - [x] 타입별 분포 차트 (하단)
  - [x] 에러 처리 (에러 메시지 + 재시도 버튼) - `app/stats/error.tsx` 구현 완료
  - [x] 네비게이션에 통계 페이지 링크 추가 - Navbar에 이미 존재
  - [x] 최종 페이지 확인

## Phase 5: 북마크 페이지 (`/bookmarks`) - 선택 사항

- [x] Supabase 설정 확인
  - [x] `bookmarks` 테이블 확인 (db.sql 참고)
    - [x] `users` 테이블과의 관계 확인 (user_id FK → users.id, ON DELETE CASCADE)
    - [x] 인덱스 확인 (user_id, content_id, created_at DESC)
    - [x] RLS 비활성화 확인 (개발 환경) - DISABLE ROW LEVEL SECURITY
- [x] 북마크 목록 페이지
  - [x] `app/bookmarks/page.tsx` 생성
    - [x] 인증된 사용자만 접근 가능
    - [x] 로그인하지 않은 경우 로그인 유도
  - [x] `components/bookmarks/bookmark-list.tsx` 생성
    - [x] 사용자 북마크 목록 조회 (`getUserBookmarks()`)
    - [x] 카드 레이아웃 (홈페이지와 동일한 tour-card 사용)
    - [x] 빈 상태 처리 (북마크 없을 때)
    - [x] 로딩 상태 (Skeleton UI)
  - 추가 개발 사항
    - [x] `getBookmarkedTours()` Server Action 추가 (TourDetail 조회 및 TourItem 변환)
    - [x] `components/bookmarks/bookmark-card.tsx` 생성 (삭제 버튼 포함)
    - [x] `components/bookmarks/sign-in-prompt.tsx` 생성 (로그인 유도 UI)
    - [x] `app/bookmarks/loading.tsx` 생성 (Skeleton UI)
    - [x] `app/bookmarks/error.tsx` 생성 (에러 UI, 재시도 버튼)
    - [x] `removeBookmarkAndRevalidate()` Server Action 추가 (삭제 후 목록 새로고침)
    - [x] 메타데이터 설정 (SEO, Open Graph, Twitter Card)
    - [x] 반응형 그리드 레이아웃 (1열/2열/3열/4열)
    - [x] 접근성 속성 (ARIA 라벨, role="list", role="listitem")
    - [x] 다크 모드 지원
- [x] 북마크 관리 기능
  - [x] 정렬 옵션
    - [x] 최신순 (created_at DESC) - 기본 정렬로 구현됨
    - [x] 이름순 (가나다순)
    - [x] 지역별
  - [x] 일괄 삭제 기능
    - [x] 체크박스 선택
    - [x] 선택 항목 삭제
    - [x] 확인 다이얼로그
  - [x] 개별 삭제 기능
    - [x] 각 카드에 삭제 버튼
  - 추가 개발 사항
    - [x] AlertDialog 컴포넌트 설치 (shadcn/ui)
    - [x] Checkbox 컴포넌트 설치 (shadcn/ui)
    - [x] `removeMultipleBookmarks()` Server Action 추가
    - [x] `components/bookmarks/bookmark-toolbar.tsx` 생성 (정렬/편집 UI)
    - [x] `bookmark-card.tsx` 수정 (편집 모드 체크박스 추가)
    - [x] `bookmark-list.tsx` 수정 (정렬/선택 상태 관리, 삭제 다이얼로그)
    - [x] 클라이언트 측 정렬 로직 구현 (이름순: localeCompare, 지역별: AREA_CODE_NAMES)
    - [x] 전체 선택/해제 기능
    - [x] 삭제 중 로딩 상태
    - [x] 접근성 속성 (ARIA 라벨)
    - [x] 다크 모드 지원
- [x] 페이지 통합 및 스타일링
  - [x] 반응형 디자인 확인
  - [x] 최종 페이지 확인

## Phase 6: 최적화 & 배포

- [x] 이미지 최적화
  - [x] `next.config.ts` 외부 도메인 설정
    - [x] 한국관광공사 이미지 도메인 추가 (www.visitkorea.or.kr, api.visitkorea.or.kr, tong.visitkorea.or.kr, cdn.visitkorea.or.kr)
    - [ ] 네이버 지도 이미지 도메인 추가
  - [x] Next.js Image 컴포넌트 사용 확인
    - [x] priority 속성 (above-the-fold)
    - [x] lazy loading (below-the-fold)
    - [x] responsive sizes 설정
- [ ] 전역 에러 핸들링
  - [ ] `app/error.tsx` 생성
  - [ ] `app/global-error.tsx` 생성
  - [ ] API 에러 처리 개선
- [ ] 404 페이지
  - [ ] `app/not-found.tsx` 생성
    - [ ] 사용자 친화적인 메시지
    - [ ] 홈으로 돌아가기 버튼
- [ ] SEO 최적화
  - [ ] 메타태그 설정 (`app/layout.tsx`)
    - [ ] 기본 title, description
    - [ ] Open Graph 태그
    - [ ] Twitter Card 태그
  - [ ] `app/sitemap.ts` 생성
    - [ ] 동적 sitemap 생성 (관광지 상세페이지 포함)
  - [ ] `app/robots.ts` 생성
- [ ] 성능 최적화
  - [ ] Lighthouse 점수 측정 (목표: > 80)
  - [ ] 코드 분할 확인
  - [ ] 불필요한 번들 제거
  - [ ] API 응답 캐싱 전략 확인
- [ ] 환경변수 보안 검증
  - [ ] 모든 필수 환경변수 확인
  - [ ] `.env.example` 업데이트
  - [ ] 프로덕션 환경변수 설정 가이드 작성
- [ ] 배포 준비
  - [ ] Vercel 배포 설정
  - [ ] 환경변수 설정 (Vercel 대시보드)
  - [ ] 빌드 테스트 (`pnpm build`)
  - [ ] 프로덕션 배포 및 테스트

## 추가 작업 (선택 사항)

- [x] 다크 모드 지원
  - [ ] 테마 전환 기능 (토글 버튼)
  - [x] 모든 컴포넌트 다크 모드 스타일 적용 (Tailwind CSS dark: 클래스 사용)
- [ ] PWA 지원
  - [ ] `app/manifest.ts` 생성
  - [ ] Service Worker 설정
  - [ ] 오프라인 지원
- [x] 접근성 개선
  - [x] ARIA 라벨 추가 (aria-label, role 속성 사용)
  - [x] 키보드 네비게이션 개선 (갤러리, 지도 등)
  - [ ] 색상 대비 확인 (WCAG AA)
- [ ] 성능 모니터링
  - [ ] Web Vitals 측정
  - [ ] 에러 로깅 (Sentry 등)
- [ ] 사용자 피드백
  - [ ] 피드백 수집 기능
  - [ ] 버그 리포트 기능
